# yaml-language-server: $schema=../schemas/tenant.schema.yaml
schema_version: "1.0"
tenants:
  rit_agritech:
    meta:
      full_name: "AgriTech Solutions"
      short_name: "agtech"
      api_version: 1
      description: "IoT-implementation for AgriTech Solution."
    topology:
      farms:
        - id: "farm-taastrup"
          name: "RÃ¸rendegaard"
          city: "Taastrup"
          devices:
            - id: "temp-01"
              class: "sensor"
              model: "DHT22"
              location: "greenhouse"
              policies: [ "sensor-pub" ]
            - id: "hum-01"
              class: "sensor"
              model: "X1C"
              location: "greenhouse"
              policies: [ "sensor-pub" ]
            - id: "irrig-01"
              class: "actuator"
              model: "valve-v2"
              location: "greenhouse"
              policies: [ "command-sub" ]
            - id: "drone-01"
              class: "drone"
              model: "x4-quadcopter"
              location: "cropfield"
              policies: [ "command-sub" ]

        - id: "farm-roskilde"
          name: "Nordmark"
          city: "Roskilde"
          devices:
            - id: "temp-01"
              class: "sensor"
              model: "DHT22"
              location: "cropfield"
              policies: [ "sensor-pub" ]

    definitions:
      device_classes:
        drone: { }
        sensor: { }
        actuator: { }
      message_classes:
        - id: metric
          topic: metric
        - id: event
          topic: evt
        - id: alert
          topic: alert
        - id: command
          topic: cmd
        - id: image
          topic: img

    policies:
      - name: "sensor-pub"
        farms: [ "farm-taastrup", "farm-roskilde" ]
        device_classes: [ "sensor" ]
        message_classes: [ "metric","event","alert" ]
        direction: PUB
      - name: "command-sub"
        farms: [ "farm-taastrup", "farm-roskilde" ]
        device_classes: [ "actuator","drone" ]
        message_classes: [ "cmd" ]
        direction: SUB
